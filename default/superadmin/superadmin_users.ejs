<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Silay Housing Authority </title>
		<!-- HTML5 Shim and Respond.js IE10 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 10]>
		<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
		<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
		<![endif]-->
		<!-- Meta -->
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="description" content="#">
		<meta name="keywords" content="Admin , Responsive, Landing, Bootstrap, App, Template, Mobile, iOS, Android, apple, creative app">
		<meta name="author" content="#">
		<!-- Favicon icon -->
		<link rel="icon" href="/assets/images/silay.png" type="image/x-icon">
		<!-- Google font-->
		<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,800" rel="stylesheet">
		<!-- Required Fremwork -->
		<link rel="stylesheet" type="text/css" href="/bower_components/bootstrap/css/bootstrap.min.css">
		<!-- radial chart.css -->
		<link rel="stylesheet" href="/assets/pages/chart/radial/css/radial.css" type="text/css" media="all">
		<!-- feather Awesome -->
		<link rel="stylesheet" type="text/css" href="/assets/icon/feather/css/feather.css">
		<!-- Style.css -->
		<link rel="stylesheet" type="text/css" href="/assets/css/style.css">
		<link rel="stylesheet" type="text/css" href="/assets/css/user.css">
		<link rel="stylesheet" type="text/css" href="/assets/css/jquery.mCustomScrollbar.css">
	</head>
	<!-- Menu sidebar static layout -->
	<body>
		<!-- Pre-loader start -->
		<div class="theme-loader">
			<div class="ball-scale">
				<div class='contain'>
					<div class="ring">
						<div class="frame"></div>
					</div>
					<div class="ring">
						<div class="frame"></div>
					</div>
					<div class="ring">
						<div class="frame"></div>
					</div>
					<div class="ring">
						<div class="frame"></div>
					</div>
					<div class="ring">
						<div class="frame"></div>
					</div>
					<div class="ring">
						<div class="frame"></div>
					</div>
					<div class="ring">
						<div class="frame"></div>
					</div>
					<div class="ring">
						<div class="frame"></div>
					</div>
					<div class="ring">
						<div class="frame"></div>
					</div>
					<div class="ring">
						<div class="frame"></div>
					</div>
				</div>
			</div>
		</div>
		<!-- Pre-loader end -->
		<div id="pcoded" class="pcoded">
			<div class="pcoded-overlay-box"></div>
			<div class="pcoded-container navbar-wrapper">
				<nav class="navbar header-navbar pcoded-header">
					<div class="navbar-wrapper">
						<div class="navbar-logo">
							<a class="mobile-menu" id="mobile-collapse" href="#!">
								<i class="feather icon-menu"></i>
							</a>
							<a href="index-1.htm">
    <span class="logo-text">SILAY CITY</span>
</a>
							<a class="mobile-options">
								<i class="feather icon-more-horizontal"></i>
							</a>
						</div>
						<div class="navbar-container container-fluid">
							<ul class="nav-left">
								<li class="header-search">
									<div class="main-search morphsearch-search">
										<div class="input-group">
											<span class="input-group-addon search-close">
												<i class="feather icon-x"></i>
											</span>
											<input type="text" class="form-control">
											<span class="input-group-addon search-btn">
												<i class="feather icon-search"></i>
											</span>
										</div>
									</div>
								</li>
								<li>
									<a href="#!" onclick="javascript:toggleFullScreen()">
										<i class="feather icon-maximize full-screen"></i>
									</a>
								</li>
								<li>
									<a href="/register" class="btn btn-primary rounded" id="addSeniorBtn" target="_blank">
										<i class="feather icon-user-plus"></i>ADD USER</a>
								</li>
							</ul>
							<ul class="nav-right">
								<li class="user-profile header-notification">
									<div class="dropdown-primary dropdown">
										<div class="dropdown-toggle" data-toggle="dropdown">
											<!-- <img src="/assets/images/avatar-4.jpg" class="img-radius" alt="User-Profile-Image">
											<span>John Doe</span> -->
											<i class="feather icon-chevron-down"></i>
										</div>
										<ul class="show-notification profile-notification dropdown-menu" data-dropdown-in="fa	jdeIn" data-dropdown-out="fadeOut">
											<li>
												<a href="/logout">
													<i class="feather icon-log-out"></i> Logout </a>
											</li>
										</ul>
									</div>
								</li>
							</ul>
						</div>
					</div>
				</nav>
				<div class="pcoded-main-container">
					<div class="pcoded-wrapper">
						<nav class="pcoded-navbar">
							<div class="pcoded-inner-navbar main-menu">
								<div class="pcoded-navigatio-lavel">Navigation</div>
								<ul class="pcoded-item pcoded-left-item">
									<li class="pcoded-hasmenu active pcoded-trigger">
										<a href="javascript:void(0)">
											<span class="pcoded-micon">
												<i class="feather icon-home"></i>
											</span>
											<span class="pcoded-mtext">Dashboard</span>
										</a>
										<ul class="pcoded-submenu">
											<li class="">
												<a href="/index-superadmin">
													<span class="">ADMIN</span>
												</a>
											</li>
											<li class="active">
												<a href="/superadmin-users">
													<span class="">USER</span>
												</a>
											</li>
										</ul>
									</li>
								</ul>
							</div>
						</nav>
						<div class="pcoded-content">
							<div class="pcoded-inner-content">
								<div class="main-body">
									<div class="page-wrapper">

									<div class="admin-container">
									
																				<div class="user-list-container">

																						<!-- Nav tabs to separate users by status -->
																						<ul class="nav nav-tabs" id="userTabs" role="tablist">
																							<li class="nav-item">
																								<a class="nav-link active" href="#" data-status="Active">Active</a>
																							</li>
																							<li class="nav-item">
																								<a class="nav-link" href="#" data-status="Inactive">Inactive</a>
																							</li>
																	
																						</ul>

																						<table id="user-table">
	<thead>
		<tr>
			<th>Name</th>
			<th>Email</th>
			<th>Role</th>
			<th>Status</th>
			<th>Actions</th>
		</tr>
	</thead>
	<tbody id="user-list">
		<% if (users && users.length > 0) { %>
			<% users.forEach(function(user) { %>
				<tr class="user-row status-<%= user.status %>">
					<td><%= user.name %></td>
					<td><%= user.email %></td>
					<td><%= user.role %></td>
					<td><%= user.status %></td>
					<td>
						<button type="button" class="btn btn-link p-0 open-edit"
							data-id="<%= user._id %>" 
							data-name="<%= user.name %>" 
							data-email="<%= user.email %>" 
							data-role="<%= user.role %>" 
							data-status="<%= user.status %>">Edit</button>
						<form action="/edit-user" method="POST" style="display:inline-block; margin-left:8px;">
								<input type="hidden" name="id" value="<%= user._id %>" required>
								<button type="button" class="btn btn-link p-0 status-btn <%= user.status === 'Inactive' ? '' : 'text-danger' %>" data-action="<%= user.status === 'Inactive' ? 'activate' : 'deactivate' %>">
									<%= user.status === 'Inactive' ? 'Activate' : 'Deactivate' %>
								</button>
						</form>
					</td>
				</tr>
			<% }); %>
		<% } else { %>
			<tr>
				<td colspan="6">No users found</td>
			</tr>
		<% } %>
	</tbody>
</table>


																				</div>
										
										<!-- Edit User Modal -->
										<div id="edit-modal" class="modal">
											<div class="modal-content">
												<span class="close-btn">&times;</span>
												<h2>Edit User</h2>
												<form id="edit-user-form" method="POST" action="/update-user">
													<input type="hidden" id="edit-user-id" name="id">
													<div class="form-group">
														<label for="edit-username">Name:</label>
														<input type="text" id="edit-username" name="name" required>
													</div>
													<div class="form-group">
														<label for="edit-email">Email:</label>
														<input type="email" id="edit-email" name="email" required>
													</div>
													<div class="form-group">
										<label for="edit-password">New Password:</label>
										<input type="password" id="edit-password" name="password" minlength="6" placeholder="Leave blank to keep current">
									</div>
									<div class="form-group">
										<label for="edit-confirm">Confirm Password:</label>
										<input type="password" id="edit-confirm" name="confirm_password" minlength="6" placeholder="Leave blank to keep current">
									</div>
													<div class="form-group">
														<label for="edit-role">Role:</label>
														<select id="edit-role" name="role" required>
															<option value="Admin">Admin</option>
															<option value="Staff">Staff</option>
															<option value="Super Admin">Super Admin</option>
															<option value="Youth">Youth</option>
														</select>
													</div>
													<div class="form-actions">
														<button type="submit" class="save-btn">Save Changes</button>
														<button type="button" class="cancel-btn">Cancel</button>
													</div>
												</form>
											</div>
										</div>
									</div>
								</div>
								<!-- latest activity end -->
							</div>
						</div>
					</div>
					<div id="styleSelector"></div>
				</div>
			</div>
		</div>
		</div>
		</div>
		</div>
		</div>
		</div>
		</div>
		</div>
		</div>
		</div>
		</div>
		<!-- Warning Section Ends -->
		<!-- Required Jquery -->
		<script type="text/javascript" src="/bower_components/jquery/js/jquery.min.js"></script>
		<script type="text/javascript" src="/bower_components/jquery-ui/js/jquery-ui.min.js"></script>
		<script type="text/javascript" src="/bower_components/popper.js/js/popper.min.js"></script>
		<script type="text/javascript" src="/bower_components/bootstrap/js/bootstrap.min.js"></script>
		<!-- jquery slimscroll js -->
		<script type="text/javascript" src="/bower_components/jquery-slimscroll/js/jquery.slimscroll.js"></script>
		<!-- modernizr js -->
		<script type="text/javascript" src="/bower_components/modernizr/js/modernizr.js"></script>
		<script type="text/javascript" src="/bower_components/modernizr/js/css-scrollbars.js"></script>
		<!-- Chart js -->
		<script type="text/javascript" src="/bower_components/chart.js/js/Chart.js"></script>
		<!-- Google map js -->
		<script src="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js"></script>
		<script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=true"></script>
		<script type="text/javascript" src="/assets/pages/google-maps/gmaps.js"></script>
		<!-- gauge js -->
		<script src="/assets/pages/widget/gauge/gauge.min.js"></script>
		<script src="/assets/pages/widget/amchart/amcharts.js"></script>
		<script src="/assets/pages/widget/amchart/serial.js"></script>
		<script src="/assets/pages/widget/amchart/gauge.js"></script>
		<script src="/assets/pages/widget/amchart/pie.js"></script>
		<script src="/assets/pages/widget/amchart/light.js"></script>
		<!-- Custom js -->
		<script src="/assets/js/pcoded.min.js"></script>
		<script src="/assets/js/vartical-layout.min.js"></script>
		<script src="/assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
		<script type="text/javascript" src="/assets/pages/dashboard/crm-dashboard.min.js"></script>
		<script type="text/javascript" src="/assets/js/script.js"></script>
		<!-- Removed update.js here to avoid preventing form submit on this page -->
		<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
		<script>
		  // Tab switching and status confirm handlers
		  $(function(){
		    // Show only rows matching the active tab on load
		    function showStatus(status){
		      $('.user-row').hide();
		      $('.status-' + status).show();
		    }
		    showStatus('Active');

		    $('#userTabs .nav-link').on('click', function(e){
		      e.preventDefault();
		      $('#userTabs .nav-link').removeClass('active');
		      $(this).addClass('active');
		      var status = $(this).data('status');
		      showStatus(status);
		    });

		    // Handle activate/deactivate clicks
		    $(document).on('click', '.status-btn', function(e){
		      e.preventDefault();
		      var action = $(this).data('action');
		      var form = $(this).closest('form');
		      if (action === 'deactivate'){
		        Swal.fire({
		          title: 'Confirm Deactivation',
		          text: 'Make sure you want to deactivate this account.',
		          icon: 'warning',
		          showCancelButton: true,
		          confirmButtonText: 'Yes, deactivate',
		          cancelButtonText: 'Cancel'
		        }).then((result) => {
		          if (result.isConfirmed) {
		            form.submit();
		          }
		        });
		      } else {
		        // Activate - no confirmation
		        form.submit();
		      }
		    });
		  });

		  $(document).on('click', '.open-edit', function() {
			const id = $(this).data('id');
			const name = $(this).data('name');
			const email = $(this).data('email');
			const role = $(this).data('role');
			const status = $(this).data('status');

			$('#edit-user-id').val(id);
			$('#edit-username').val(name);
			$('#edit-email').val(email);
			$('#edit-role').val(role);
			$('#edit-status').val(status);

			$('#edit-modal').show();
		  });

		  $('.close-btn, .cancel-btn').on('click', function(){
			$('#edit-modal').hide();
		  });

		  $(window).on('click', function(e){
			if (e.target.id === 'edit-modal') {
			  $('#edit-modal').hide();
			}
		  });
		</script>
		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-23581568-13"></script>
		<script>
			window.dataLayer = window.dataLayer || [];

			function gtag() {
				dataLayer.push(arguments);
			}
			gtag('js', new Date());
			gtag('config', 'UA-23581568-13');
		</script>
	</body>
</html>